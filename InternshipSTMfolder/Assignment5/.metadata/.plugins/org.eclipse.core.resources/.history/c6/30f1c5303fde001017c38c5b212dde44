/*
 * extint_init.c
 *
 *  Created on: Dec 19, 2025
 *      Author: ADMIN
 */
#include"stm32f407xx.h"
void ext_intr_init(void)
{
	//Enable clock
	RCC -> AHB1ENR  |= BV(0);

	//set as input
	GPIOA ->MODER &= ~(BV(0) | BV(1));

	//PORTA already has pullup/pull down reg so select no pullup or pulldown
	GPIOA ->PUPDR &= ~(BV(0) | BV(1));

	//falling edge trigger
	EXTI->FSTR |= BV(0);

	//Unmask enti0 intr
	EXTI->IMR |= BV(0);

	//Mapping on exitline using syscfg reg
	SYSCFG->EXTICR1 &= ~(BV(0) | BV(1) | BV(2) | BV(3));

	//Enable NVIC
	NVIC_EnableIRQ(EXTI0_IRQn);
}
