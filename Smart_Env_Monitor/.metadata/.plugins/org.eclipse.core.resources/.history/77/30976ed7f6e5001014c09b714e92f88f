/*
 * DHT11.c
 *
 *  Created on: Dec 30, 2025
 *      Author: ADMIN
 */
// i want to take 40 bits from Dht11
// step 1 : make dht11 low foe 18ms it will work as output
//step 2 :then make it high for 30us as input
//step 3 :then low for 80us wait to become high
//step 4 :then high for 80us wait to become low
//step 5 :read 40 bits
//in that 1st byte is humidity integer
//2nd byte is humidity decimal
// 3rd byte temp integer
//4th byte temp decimal
//5th parity
// then need to convert that into hex then decimal
//then display it on lcd as string
void DWT_Init(void)
{
    /* Enable TRC (Trace) unit
     * Without this, DWT registers will not work
     */
    CoreDebug->DEMCR |= CoreDebug_DEMCR_TRCENA_Msk;

    /* Reset cycle counter value to 0 */
    DWT->CYCCNT = 0;

    /* Enable the cycle counter (CYCCNT) */
    DWT->CTRL |= DWT_CTRL_CYCCNTENA_Msk;
}
void DWT_Delay_us(uint32_t us)
{
    /* Calculate number of CPU cycles needed for given delay
     * Example:
     * SystemCoreClock = 72 MHz
     * 1 Âµs = 72 cycles
     */
    uint32_t cycles = (SystemCoreClock / 1000000) * us;

    /* Store the current cycle counter value */
    uint32_t start = DWT->CYCCNT;

    /* Wait until required number of cycles have passed */
    while ((DWT->CYCCNT - start) < cycles);
}
char data[5];
void dht11_operation()
{
	HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_RESET);
	DWT_Delay_us();
	HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_SET);
	DWT_Delay_us();
	HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_RESET);
	DWT_Delay_us();
	HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_SET);
	DWT_Delay_us();

}











